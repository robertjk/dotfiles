################################################################################
#
# What to run after startup
#
################################################################################

# TIP: Currently I don't know of any clean way of creating complex layouts
# within a single workspace on startup. The only hacky solution I know about is
# using timeouts with `sleep` command, e.g.:
#
#   sleep 0.3s && swaymsg "exec <command>"


### Define some constants

# Paths
set $portal_ui_path ~/programming/credijusto/portal-ui

# Commands
set $neovim $term --title Neovim --command nvim
set $term_portal_ui $term --title "Portal UI" --working-directory $portal_ui_path
set $term_portal_ui_server $term --title "Portal UI (Server)" --working-directory $portal_ui_path --command "npm" "start"


### Run applications

exec firefox-developer-edition

exec thunderbird

exec $neovim

exec swaymsg "workspace $workspace_terminals; exec $term"

exec swaymsg "workspace $workspace_portal; layout splith"
exec $term_portal_ui
# Display the non-server terminal to the left
exec sleep 0.3s && $term_portal_ui_server
# Focus the non-server terminal
exec sleep 0.6s && swaymsg 'workspace $workspace_portal; [title="^Portal UI$"] focus'

### Set focus

exec sleep 1s && swaymsg 'workspace $workspace_www'
exec sleep 1s && swaymsg '[title="Firefox"] focus'
