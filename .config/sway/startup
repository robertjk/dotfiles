################################################################################
#
# What to run after startup
#
################################################################################

# TIP: Currently I don't know of any clean way of creating complex layouts
# within a single workspace on startup. The only hacky solution I know about is
# using timeouts with `sleep` command, e.g.:
#
#   sleep 0.3s && swaymsg "exec <command>"


### Define some constants

set $neovim $term --command nvim

set $term_minerals_base $term --working-directory ~/programming/credijusto/minerals
set $term_minerals_main $term_minerals_base --title "Minerals" --class "Minerals"
set $term_minerals_server $term_minerals_base --title "Minerals (Server)" --class "Minerals (Server)"

set $term_website_base $term --working-directory ~/programming/credijusto/landing-website-ui
set $term_website_main $term_website_base --title "Landing Website UI" --class "Landing Website UI"
set $term_website_server $term_website_base --title "Landing Website UI (Server)" --class "Landing Website UI (Server)"


### Run applications

exec firefox-developer-edition
exec thunderbird
exec $neovim

exec swaymsg 'workspace $workspace_terminals; exec $term'
exec swaymsg 'workspace $workspace_terminals; layout stacking'

# Focus the non-server terminal and start UI Components terminal
exec sleep 0.4s && swaymsg 'workspace $workspace_terminals; exec $term_minerals_main'
# Start UI Components server terminal
exec sleep 0.8s && swaymsg 'workspace $workspace_terminals; splith; exec $term_minerals_server'
# Focus the non-server terminal and start the website terminal
exec sleep 1.2s && swaymsg 'workspace $workspace_terminals; focus left; focus parent; exec $term_website_main'
# Start Landing Website server terminal
exec sleep 1.6s && swaymsg 'workspace $workspace_terminals; splith; exec $term_website_server'
# Focus the non-server terminal and then the main terminal
exec sleep 2.0s && swaymsg 'workspace $workspace_terminals; focus left; focus down'


### Set focus

exec sleep 3s && swaymsg 'workspace $workspace_www; [title="Firefox"] focus'
